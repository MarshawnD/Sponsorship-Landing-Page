<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tabbed Audience Charts</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-black text-white p-10">

<div class="max-w-5xl mx-auto bg-white rounded-2xl overflow-hidden text-black">
  <!-- Tabs -->
  <div class="flex">
    <button class="tab-button px-6 py-4 font-semibold w-1/3 text-white active-tab" onclick="showTab(0)">CapRadio Audience</button>
    <button class="tab-button px-6 py-4 font-semibold w-1/3" onclick="showTab(1)">News Composition</button>
    <button class="tab-button px-6 py-4 font-semibold w-1/3" onclick="showTab(2)">Music Composition</button>
  </div>

  <!-- Tab Content -->
  <div class="p-6 bg-white" id="tab-content">
    <!-- Content loaded via JavaScript -->
  </div>
</div>

<style>
  button { background-color: #6B1E1E; color: white; }
  .active-tab { background-color: #ffffff; color: #6B1E1E; }
</style>

<script>
const tabData = [
  {
    title: "CapRadio Audience",
    gender: [48, 52],
    income: [60, 27, 13],
    age: [17, 19, 15, 15, 34],
  },
  {
    title: "News Composition",
    gender: [50, 50],
    income: [50, 10, 40],
    age: [13, 20, 2, 3, 62],
  },
  {
    title: "Music Composition",
    gender: [51, 49],
    income: [40, 35, 25],
    age: [20, 25, 15, 10, 30],
  }
];

let currentCharts = [];

function showTab(index) {
  // Set active tab button
  document.querySelectorAll(".tab-button").forEach((btn, i) => {
    btn.classList.toggle("active-tab", i === index);
  });

  // Clear old content
  const container = document.getElementById("tab-content");
  container.innerHTML = `
    <div class="grid grid-cols-2 gap-6">
      <div class="bg-gray-100 p-4 rounded-xl flex items-center">
        <div class="text-center w-full">
          <div class="text-2xl font-bold text-maroon">üõçÔ∏è</div>
          <p class="mt-2 text-sm font-medium">CapRadio news listeners spend over <br><strong>$2.5 billion</strong> annually in metro area retail sales</p>
        </div>
      </div>
      <div class="bg-gray-100 p-4 rounded-xl">
        <canvas id="genderChart"></canvas>
        <p class="text-center text-sm mt-2">GENDER</p>
      </div>
      <div class="bg-gray-100 p-4 rounded-xl">
        <canvas id="ageChart"></canvas>
        <p class="text-center text-sm mt-2">AGE RANGES</p>
      </div>
      <div class="bg-gray-100 p-4 rounded-xl">
        <canvas id="incomeChart"></canvas>
        <p class="text-center text-sm mt-2">HOUSEHOLD INCOME</p>
      </div>
    </div>
    <p class="text-xs text-gray-500 mt-4 italic">Sources: Information about where we sourced our data. Some more info and maybe a link or just date ranges.</p>
  `;

  // Destroy previous charts
  currentCharts.forEach(chart => chart.destroy());
  currentCharts = [];

  const data = tabData[index];

  // Gender Chart
  currentCharts.push(new Chart(document.getElementById('genderChart'), {
    type: 'pie',
    data: {
      labels: ['Female', 'Male'],
      datasets: [{ data: data.gender, backgroundColor: ['#4DA6B3', '#134C5E'] }]
    },
    options: { plugins: { legend: { position: 'bottom' } } }
  }));

  // Age Chart
  currentCharts.push(new Chart(document.getElementById('ageChart'), {
    type: 'doughnut',
    data: {
      labels: ['18-34', '35-44', '45-54', '55-64', '65+'],
      datasets: [{ data: data.age, backgroundColor: ['#F9A825', '#EF6C00', '#D84315', '#6D4C41', '#2E7D32'] }]
    },
    options: { plugins: { legend: { position: 'bottom' } } }
  }));

  // Income Chart
  currentCharts.push(new Chart(document.getElementById('incomeChart'), {
    type: 'pie',
    data: {
      labels: ['$100K+', '$50K - $100K', 'Under $50K'],
      datasets: [{ data: data.income, backgroundColor: ['#6B1E1E', '#A93226', '#E74C3C'] }]
    },
    options: { plugins: { legend: { position: 'bottom' } } }
  }));
}

// Initialize
showTab(0);
</script>

</body>
</html>
